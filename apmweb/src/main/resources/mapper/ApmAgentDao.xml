<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">


<mapper namespace="apm.web.dao.apmmysql.ApmAgentDao">

    <select id="getAgetnInfoByAppId" parameterType="hashMap" resultMap="agentMap">
        SELECT
         alf.apiMetaId as aaa,
         alf.agentId,
         alf.startTimestamp,
         alf.eventIdentifier,
         alf.eventTimestamp,
         alf.version,
         alf.stateCode,
         alf.stateDesc,
         alf.stateName

        from agent_life_cycle alf , span sp
        WHERE
        sp.applicationId = #{appId}
        AND sp.agentId = alf.agentId
        GROUP BY alf.agentId;
    </select>

    <resultMap id="agentMap" type="apm.web.beans.module.Agent">


    </resultMap>



</mapper>
